# 同步动作与顺序执行

触发器的选项中有一个 “顺序执行” 选项（synchronous）：

![image](https://github.com/user-attachments/assets/36de874a-af72-4c03-9acc-21532887a3b1)


而触发器动作也有一个 “异步执行” 选项：

![image](https://github.com/user-attachments/assets/5a21b3a9-f44e-4433-8261-a5c51d213a27)

二者的行为和效果有一定的相似之处，容易引起误解，在此简要说明。

## 基本机制

触发器插件有一个动作序列，每次触发器被触发时，会按照一定的逻辑将动作注册进动作序列，然后序列中的动作会被分配到不同线程执行。

这两个属性会对这个注册和执行的过程有一定影响，从而影响动作的执行顺序。

## 顺序执行

顺序执行是一个触发器的属性，而非动作的属性。它改变的是动作的**注册方式**。

未额外改变任何设置的正常情况下，所有动作会被一起排进动作序列并异步执行，无法保证先后顺序。

而如果开启顺序执行，后面的动作会在前一个动作执行之后才排进序列，从而保证了这个触发器单次触发的执行过程中，全部动作可以保证顺序。

## 同步执行

同步执行是一个触发器动作的属性。它改变的是动作的**执行方式**。

正常情况下，动作序列中当前已到执行时间的所有动作会一起被分配线程，使用多线程模式异步执行提高效率，而这也是无法保证顺序的原因。

但开启同步执行的情况下，此动作会强制在主线程执行，且执行过程中不会允许其他动作同时执行。

这样即使一个触发器中很多动作被一起排进了序列，也会依次在主线程执行，用另一种方式保证了先后顺序。

## 二者的差异

- 准确时间
  
  顺序执行造成的延后
  
- 多次触发
  
- 冻结线程

- 改变延迟

  ...
